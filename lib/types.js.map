{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/types.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n\n'use strict'\n\n#===========================================================================================================\nGUY                       = require 'guy'\n{ alert\n  debug\n  help\n  info\n  plain\n  praise\n  urge\n  warn\n  whisper }               = GUY.trm.get_loggers 'promptparser/types'\n{ rpr\n  inspect\n  echo\n  reverse\n  log     }               = GUY.trm\n{ Intertype }             = require 'intertype'\n#...........................................................................................................\ntypes                     = null\n\n#===========================================================================================================\nget_types = ->\n  return types if types?\n  types                     = new Intertype\n  { isa\n    type_of\n    validate\n    create                } = types\n  #.........................................................................................................\n  types.declare\n    pp_linenumber:    'positive.integer'\n    pp_content_id:    ( x ) -> ( @isa.text x ) and ( /^[0-9a-f]{16}$/.test x )\n    #.......................................................................................................\n    pp_prerecord_initial:\n      fields:\n        $key:         'text'\n        lnr:          ( x ) -> @isa.optional.pp_linenumber  x ### TAINT workaround due to missing feature ###\n        promptnr:     ( x ) -> @isa.optional.text           x ### TAINT workaround due to missing feature ###\n        prompt:       ( x ) -> @isa.optional.text           x ### TAINT workaround due to missing feature ###\n        prompt_id:    ( x ) -> @isa.optional.pp_content_id  x ### TAINT workaround due to missing feature ###\n        generations:  ( x ) -> @isa.optional.list           x ### TAINT workaround due to missing feature ###\n        comment:      ( x ) -> @isa.optional.text           x ### TAINT workaround due to missing feature ###\n        rejected:     ( x ) -> @isa.optional.boolean        x ### TAINT workaround due to missing feature ###\n      template:\n        $key:         'prerecord'\n        lnr:          null\n        promptnr:     null\n        prompt:       null\n        prompt_id:    null\n        generations:  null\n        comment:      null\n        rejected:     false\n    #.......................................................................................................\n    pp_prerecord_final:\n      fields:\n        $key:         'text'\n        lnr:          'positive.integer'\n        promptnr:     ( x ) -> @isa.optional.text x ### TAINT workaround due to missing feature ###\n        prompt:       'text'\n        prompt_id:    'pp_content_id'\n        generations:  ( x ) -> ( @isa.list x ) and ( x.every ( e ) => @isa.cardinal e ) ### TAINT workaround due to missing feature ###\n        comment:      ( x ) -> @isa.optional.text x ### TAINT workaround due to missing feature ###\n        rejected:     'boolean'\n      create: ( x ) ->\n        return x unless @isa.object x\n        return x\n    #.......................................................................................................\n    fm_constructor_cfg:\n      fields:\n        db_path:              'nonempty.text'\n        datasource_path:      ( x ) -> @isa.optional.nonempty.text x ### TAINT workaround due to missing feature ###\n        has_db_path:          'boolean'\n        has_datasource_path:  'boolean'\n        has_db:               'boolean'\n      create: ( db_path, datasource_path ) ->\n        has_db_path         = db_path?\n        has_datasource_path = datasource_path?\n        ### NOTE `has_db_path` could conceivably be used to optionally open a temporary DB; only when that\n        DB actually exists would `has_db` be set to true; FTTB we don't do that so we here assume that in\n        case there's a `db_path` there will be a (functional, writable &c) DB file to access, and otherwise,\n        there will be no DB file. Observe that in any case, even if we did check for a file, we would still\n        have to test its fitness for the purpose, so other than a given `db_path` pointing to an unsuitable\n        location, there will remain failure modes that won't be captured by `has_db`. As such, `has_db` is\n        more of an advisory, informative property: 'act as if there is / there is no DB file'. ###\n        has_db              = has_db_path\n        has_datasource      = has_datasource_path\n        auto_populate_db    = has_db and has_datasource\n        return {\n          db_path,          has_db_path,          has_db,\n          datasource_path,  has_datasource_path,  has_datasource,\n          auto_populate_db, }\n  #.........................................................................................................\n  return types\n\n\n#===========================================================================================================\nmodule.exports = { get_types, }\n"
  ]
}